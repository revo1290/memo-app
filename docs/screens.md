# 画面設計書

## 1. 画面一覧

| No | 画面名 | パス | 説明 |
|----|--------|------|------|
| 1 | メモ一覧 | `/` | トップページ。メモの一覧表示（無限スクロール対応） |
| 2 | メモ新規作成 | `/memo/new` | 新しいメモを作成（文字数カウント付き） |
| 3 | メモ詳細 | `/memo/[id]` | メモの内容を表示 |
| 4 | メモ編集 | `/memo/[id]/edit` | メモを編集（文字数カウント付き） |
| 5 | ゴミ箱 | `/trash` | 削除済みメモの一覧表示・復元・完全削除 |

---

## 2. 共通レイアウト

```
┌─────────────────────────────────────────────────────────────────────┐
│ Header                                                               │
│ ┌─────────────┐ ┌────────────────────────────────┐ ┌──────────────┐ │
│ │   Logo      │ │        Search Bar              │ │  New Memo    │ │
│ │   Memo App  │ │  🔍 メモを検索...               │ │    Button    │ │
│ └─────────────┘ └────────────────────────────────┘ └──────────────┘ │
├─────────────────────────────────────────────────────────────────────┤
│           │                                                          │
│  Sidebar  │                    Main Content                         │
│           │                                                          │
│ ┌───────┐ │                                                          │
│ │ All   │ │                                                          │
│ │ Memos │ │                                                          │
│ ├───────┤ │                                                          │
│ │ 🗑️    │ │                                                          │
│ │ゴミ箱(3)│ │                                                          │
│ ├───────┤ │                                                          │
│ │ Tags  │ │                                                          │
│ │ ───── │ │                                                          │
│ │ 仕事  │ │                                                          │
│ │ 生活  │ │                                                          │
│ │ アイデア │                                                          │
│ └───────┘ │                                                          │
│           │                                                          │
└───────────┴──────────────────────────────────────────────────────────┘
```

---

## 3. 画面詳細

### 3.1 メモ一覧画面 `/`

```
┌─────────────────────────────────────────────────────────────────────┐
│ Header (共通)                                                        │
├─────────────┬───────────────────────────────────────────────────────┤
│   Sidebar   │                                                        │
│             │  ┌─────────────────────────────────────────────────┐  │
│  All Memos  │  │  Sort: [更新日 ▼]                                │  │
│             │  └─────────────────────────────────────────────────┘  │
│  ─────────  │                                                        │
│             │  ┌─────────────────────────────────────────────────┐  │
│  Tags       │  │ 📌 買い物リスト                            ★   │  │
│  ┌────────┐ │  │ 生活                                            │  │
│  │ 仕事   │ │  │ 牛乳、パン、卵を買う...                        │  │
│  │ (12)   │ │  │ 2026/01/12 10:30                                │  │
│  ├────────┤ │  └─────────────────────────────────────────────────┘  │
│  │ 生活   │ │                                                        │
│  │ (8)    │ │  ┌─────────────────────────────────────────────────┐  │
│  ├────────┤ │  │ 会議メモ                                    ☆   │  │
│  │ アイデア │  │ 仕事                                             │  │
│  │ (5)    │ │  │ - 今週のタスク確認...                           │  │
│  └────────┘ │  │ 2026/01/11 15:00                                │  │
│             │  └─────────────────────────────────────────────────┘  │
│  ─────────  │                                                        │
│             │  ┌─────────────────────────────────────────────────┐  │
│  + タグ追加  │  │ アプリのアイデア                            ☆   │  │
│             │  │ アイデア                                         │  │
│             │  │ 新しいTodoアプリを作りたい...                   │  │
│             │  │ 2026/01/10 09:00                                │  │
│             │  └─────────────────────────────────────────────────┘  │
│             │                                                        │
└─────────────┴───────────────────────────────────────────────────────┘
```

**機能**:
- メモカードクリックで詳細画面へ遷移
- カードホバー時に編集ボタンとピン留めボタン表示
- ★/☆ クリックでピン留めトグル
- タグクリックでフィルタリング
- タグホバー時に削除ボタン表示
- ソートセレクトで並び替え
- 検索バーでデバウンス付き検索

---

### 3.2 メモ新規作成画面 `/memo/new`

```
┌─────────────────────────────────────────────────────────────────────┐
│ Header (共通)                                                        │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│   ← 戻る                                                             │
│                                                                      │
│   ┌─────────────────────────────────────────────────────────────┐   │
│   │ タイトル                                                     │   │
│   │ ┌─────────────────────────────────────────────────────────┐ │   │
│   │ │ 新しいメモのタイトルを入力                               │ │   │
│   │ └─────────────────────────────────────────────────────────┘ │   │
│   └─────────────────────────────────────────────────────────────┘   │
│                                                                      │
│   ┌─────────────────────────────────────────────────────────────┐   │
│   │ タグ                                                         │   │
│   │ ┌────────┐ ┌────────┐ ┌──────────┐                         │   │
│   │ │ 仕事 ✕ │ │ + タグ │ │          │                         │   │
│   │ └────────┘ └────────┘ └──────────┘                         │   │
│   └─────────────────────────────────────────────────────────────┘   │
│                                                                      │
│   ┌─────────────────────────────────────────────────────────────┐   │
│   │ [編集] [プレビュー]                                 ☆ ピン留め│   │
│   ├─────────────────────────────────────────────────────────────┤   │
│   │                                                              │   │
│   │ # 見出し                                                     │   │
│   │                                                              │   │
│   │ - リスト1                                                    │   │
│   │ - リスト2                                                    │   │
│   │                                                              │   │
│   │ **太字** と *斜体*                                           │   │
│   │                                                              │   │
│   │ ```javascript                                                │   │
│   │ const hello = "world";                                       │   │
│   │ ```                                                          │   │
│   │                                                              │   │
│   └─────────────────────────────────────────────────────────────┘   │
│                                                                      │
│   ┌─────────────┐  ┌─────────────┐                                  │
│   │   キャンセル  │  │    保存     │                                  │
│   └─────────────┘  └─────────────┘                                  │
│                                                                      │
└─────────────────────────────────────────────────────────────────────┘
```

**機能**:
- タイトル入力（必須）
- タグ選択（複数可）
- マークダウンエディタ
- 編集/プレビュー切り替え
- ピン留めトグル
- 保存/キャンセルボタン
- 文字数カウント表示（文字数、空白除く文字数、単語数、行数）

---

### 3.3 メモ詳細画面 `/memo/[id]`

```
┌─────────────────────────────────────────────────────────────────────┐
│ Header (共通)                                                        │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│   ← 戻る                                            [編集] [削除]   │
│                                                                      │
│   ┌─────────────────────────────────────────────────────────────┐   │
│   │                                                              │   │
│   │  📌 買い物リスト                                      ★     │   │
│   │                                                              │   │
│   │  ┌──────┐ ┌──────┐                                          │   │
│   │  │ 生活 │ │ 買物 │                                          │   │
│   │  └──────┘ └──────┘                                          │   │
│   │                                                              │   │
│   │  作成: 2026/01/12 10:00  更新: 2026/01/12 10:30             │   │
│   │                                                              │   │
│   ├─────────────────────────────────────────────────────────────┤   │
│   │                                                              │   │
│   │  今週の買い物                                                │   │
│   │                                                              │   │
│   │  • 牛乳                                                      │   │
│   │  • パン                                                      │   │
│   │  • 卵                                                        │   │
│   │  • バター                                                    │   │
│   │                                                              │   │
│   │  注意点                                                      │   │
│   │                                                              │   │
│   │  特売日は水曜日なので、できれば水曜に行くこと。             │   │
│   │                                                              │   │
│   └─────────────────────────────────────────────────────────────┘   │
│                                                                      │
└─────────────────────────────────────────────────────────────────────┘
```

**機能**:
- マークダウンをレンダリング表示
- 編集ボタン → 編集画面へ
- 削除ボタン → 確認ダイアログ後に削除
- ピン留めトグル
- タグ表示

---

### 3.4 メモ編集画面 `/memo/[id]/edit`

新規作成画面と同様のレイアウト。既存データがフォームに入力された状態で表示。

---

### 3.5 ゴミ箱画面 `/trash`

```
┌─────────────────────────────────────────────────────────────────────┐
│ Header (共通)                                                        │
├─────────────┬───────────────────────────────────────────────────────┤
│   Sidebar   │                                                        │
│             │  🗑️ ゴミ箱                    [ゴミ箱を空にする]       │
│  All Memos  │                                                        │
│             │  ┌─────────────────────────────────────────────────┐  │
│  ─────────  │  │ 古いメモ                          [復元] [削除] │  │
│             │  │ 仕事                                            │  │
│  🗑️ゴミ箱(3)│  │ 削除した古いメモの内容...                       │  │
│             │  │ 削除日: 2026/01/13 10:30                        │  │
│  ─────────  │  └─────────────────────────────────────────────────┘  │
│             │                                                        │
│  Tags       │  ┌─────────────────────────────────────────────────┐  │
│  ┌────────┐ │  │ テストメモ                        [復元] [削除] │  │
│  │ 仕事   │ │  │ アイデア                                         │  │
│  └────────┘ │  │ テスト用に作成したメモ...                        │  │
│             │  │ 削除日: 2026/01/12 15:00                        │  │
│             │  └─────────────────────────────────────────────────┘  │
│             │                                                        │
└─────────────┴───────────────────────────────────────────────────────┘
```

**機能**:
- 削除済みメモの一覧表示（削除日順）
- 個別メモの復元ボタン
- 個別メモの完全削除ボタン（確認ダイアログ付き）
- ゴミ箱を空にするボタン（確認ダイアログ付き）
- サイドバーでゴミ箱がアクティブ表示

---

## 4. コンポーネント設計

### 4.1 レイアウトコンポーネント

| コンポーネント | 説明 |
|----------------|------|
| `Header` | アプリロゴ、検索バー、新規作成ボタン |
| `Sidebar` | タグ一覧、フィルター |
| `MainLayout` | Header + Sidebar + children |

### 4.2 メモ関連コンポーネント

| コンポーネント | 説明 |
|----------------|------|
| `MemoCard` | メモ一覧のカード表示 |
| `MemoCardActions` | メモカードのアクションボタン（編集、ピン留め、削除） |
| `MemoList` | メモカードのリスト |
| `MemoForm` | 作成/編集フォーム |
| `MemoEditor` | マークダウンエディタ部分 |
| `MemoPreview` | マークダウンプレビュー |
| `MemoDetail` | 詳細表示 |
| `CharacterCounter` | 文字数・単語数・行数カウント表示 |
| `InfiniteScrollList` | 無限スクロール対応メモリスト |

### 4.3 タグ関連コンポーネント

| コンポーネント | 説明 |
|----------------|------|
| `TagBadge` | タグ表示バッジ |
| `TagList` | サイドバーのタグ一覧 |
| `TagListItem` | タグリストアイテム（編集・削除ボタン付き） |
| `TagSelector` | メモ作成/編集時のタグ選択 |
| `TagCreateButton` | タグ新規作成ボタン（インライン入力） |
| `TagEditDialog` | タグ編集ダイアログ |

### 4.4 ゴミ箱関連コンポーネント

| コンポーネント | 説明 |
|----------------|------|
| `TrashMemoList` | 削除済みメモのリスト |
| `TrashMemoCard` | 削除済みメモのカード表示 |
| `TrashMemoActions` | 復元・完全削除ボタン |
| `EmptyTrashButton` | ゴミ箱を空にするボタン |

### 4.5 UIコンポーネント

| コンポーネント | 説明 |
|----------------|------|
| `Button` | ボタン（asChild対応） |
| `IconButton` | アイコンボタン |
| `Input` | テキスト入力 |
| `Textarea` | テキストエリア |
| `SearchBar` | 検索バー（デバウンス付き） |
| `SortSelect` | ソート選択 |
| `ConfirmDialog` | 確認ダイアログ |
| `EmptyState` | データなし表示 |
| `Spinner` | ローディングスピナー |
| `Badge` | バッジ表示 |
| `Tabs` | タブ切り替え |

---

## 5. レスポンシブ対応

### ブレークポイント

| サイズ | 幅 | レイアウト |
|--------|------|----------|
| Mobile | < 640px | サイドバー非表示（ハンバーガーメニュー） |
| Tablet | 640px - 1024px | サイドバー縮小表示 |
| Desktop | > 1024px | フルレイアウト |

### モバイル時の変更点

- サイドバーはドロワーメニューとして表示
- メモカードは1カラム表示
- 検索バーはアイコンクリックで展開

---

## 6. インタラクション

### 6.1 ローディング状態

- スケルトンUIでコンテンツ領域を表示
- ボタン操作時はスピナー表示

### 6.2 エラー状態

- Toast通知でエラーメッセージ表示
- 再試行ボタンの提供

### 6.3 空状態

- メモがない場合は「メモがありません。最初のメモを作成しましょう！」
- 検索結果がない場合は「該当するメモが見つかりませんでした」

---

## 更新履歴

| 日付 | 内容 |
|------|------|
| 2026-01-12 | 初版作成 |
| 2026-01-13 | メモカードへの編集ボタン追加、タグ削除機能を反映 |
| 2026-01-13 | ゴミ箱画面追加、タグ編集コンポーネント、文字数カウント、無限スクロールを追加 |
